{"version":3,"file":"index.js","sources":["../../../node_modules/@typhonjs-svelte/runtime-base/_dist/util/loader-module/index.js"],"sourcesContent":["/**\n * Provides a custom error for Node to combine CJS and ESM module not found errors.\n */\nclass ModuleLoadError extends Error\n{\n   /**\n    * @param {object} options - Options object.\n    *\n    * @param {string} options.message - Error message.\n    *\n    * @param {string} options.code - Error code.\n    */\n   constructor({ message, code })\n   {\n      super(`[${code}] ${message}`);\n      this.name = 'ModuleLoadError';\n      this.code = code;\n   }\n}\n\nclass ModuleLoader\n{\n   /**\n    * @template M, E\n    *\n    * Loads an ES Module in the browser passing back an object containing info about the loading process.\n    *\n    * @param {object}      options - Options object.\n    *\n    * @param {string|URL}  options.modulepath - A URL to load.\n    *\n    * @param {(M) => E}    [options.resolveModule] - An optional function which resolves the import to set `instance`.\n    *\n    * @returns {Promise<ModuleLoaderObj<M, E>>} The module / instance and data about the loading process.\n    */\n   static async load({ modulepath, resolveModule = undefined })\n   {\n      if (!(modulepath instanceof URL) && typeof modulepath !== 'string')\n      {\n         throw new TypeError(`'modulepath' is not a string or URL`);\n      }\n\n      if (resolveModule !== undefined && typeof resolveModule !== 'function')\n      {\n         throw new TypeError(`'resolveModule' is not a function`);\n      }\n\n      const loadpath = modulepath instanceof URL ? modulepath.toString() : modulepath;\n\n      const type = `import-${modulepath instanceof URL ||\n      (typeof modulepath === 'string' && modulepath.match(/^(https?:\\/\\/|file:\\/\\/)/)) ? 'url' : 'path'}`;\n\n      try\n      {\n         const module = await import(modulepath);\n\n         const instance = resolveModule !== void 0 ? resolveModule(module) : module;\n\n         return { filepath: loadpath, instance, isESM: true, loadpath, module, modulepath, type };\n      }\n      catch (error)\n      {\n         // In case the browser version of ModuleLoader is used on Node... The CJS and ESM loaders of Node have\n         // different error codes. Collect both of these as one error with clear stack trace from ModuleLoader.\n         /* istanbul ignore next */\n         if (error.code === 'MODULE_NOT_FOUND' || error.code === 'ERR_MODULE_NOT_FOUND')\n         {\n            throw new ModuleLoadError({\n               message: `import() failed to load ${loadpath}`,\n               code: 'ERR_MODULE_NOT_FOUND'\n            });\n         }\n\n         throw error;\n      }\n   }\n}\n\nexport { ModuleLoadError, ModuleLoader };\n//# sourceMappingURL=index.js.map\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA,MAAM,eAAe,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,WAAW,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE;AAChC,GAAG;AACH,MAAM,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;AACnC,MAAM,IAAI,CAAC,IAAI,GAAG,iBAAiB;AACnC,MAAM,IAAI,CAAC,IAAI,GAAG,IAAI;AACtB;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,aAAa,IAAI,CAAC,EAAE,UAAU,EAAE,aAAa,GAAG,SAAS,EAAE;AAC9D,GAAG;AACH,MAAM,IAAI,EAAE,UAAU,YAAY,GAAG,CAAC,IAAI,OAAO,UAAU,KAAK,QAAQ;AACxE,MAAM;AACN,SAAS,MAAM,IAAI,SAAS,CAAC,CAAC,mCAAmC,CAAC,CAAC;AACnE;;AAEA,MAAM,IAAI,aAAa,KAAK,SAAS,IAAI,OAAO,aAAa,KAAK,UAAU;AAC5E,MAAM;AACN,SAAS,MAAM,IAAI,SAAS,CAAC,CAAC,iCAAiC,CAAC,CAAC;AACjE;;AAEA,MAAM,MAAM,QAAQ,GAAG,UAAU,YAAY,GAAG,GAAG,UAAU,CAAC,QAAQ,EAAE,GAAG,UAAU;;AAErF,MAAM,MAAM,IAAI,GAAG,CAAC,OAAO,EAAE,UAAU,YAAY,GAAG;AACtD,OAAO,OAAO,UAAU,KAAK,QAAQ,IAAI,UAAU,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC;;AAEzG,MAAM;AACN,MAAM;AACN,SAAS,MAAM,MAAM,GAAG,MAAM,OAAO,UAAU,CAAC;;AAEhD,SAAS,MAAM,QAAQ,GAAG,aAAa,KAAK,KAAK,CAAC,GAAG,aAAa,CAAC,MAAM,CAAC,GAAG,MAAM;;AAEnF,SAAS,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,EAAE;AACjG;AACA,MAAM,OAAO,KAAK;AAClB,MAAM;AACN;AACA;AACA;AACA,SAAS,IAAI,KAAK,CAAC,IAAI,KAAK,kBAAkB,IAAI,KAAK,CAAC,IAAI,KAAK,sBAAsB;AACvF,SAAS;AACT,YAAY,MAAM,IAAI,eAAe,CAAC;AACtC,eAAe,OAAO,EAAE,CAAC,wBAAwB,EAAE,QAAQ,CAAC,CAAC;AAC7D,eAAe,IAAI,EAAE;AACrB,aAAa,CAAC;AACd;;AAEA,SAAS,MAAM,KAAK;AACpB;AACA;AACA;;;;","x_google_ignoreList":[0]}